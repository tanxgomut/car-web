<script setup lang="ts">
import { breakpointsTailwind, useBreakpoints } from '@vueuse/core'
import type { NavigationMenuItem } from '@nuxt/ui'
import Logo from '~/components/Logo.vue'

const route = useRoute()

const breakpoints = useBreakpoints(breakpointsTailwind)
const isSmAndUp = breakpoints.greaterOrEqual('sm')
const isMobile = breakpoints.smaller('sm')

const sectionTitles: Record<string, string> = {
    '#services': '‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£',
    '#promotion': '‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô',
    '#portfolio': '‡∏ú‡∏•‡∏á‡∏≤‡∏ô',
    '#blogs': 'Blogs',
    '#contact': '‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤'
}

const pageTitle = computed(() => {
    if (route.hash && sectionTitles[route.hash]) {
        return sectionTitles[route.hash]
    }
    return null
})

useHead({
    title: pageTitle
})

const socialLinks = ref([
    {
        label: '‡πÅ‡∏≠‡∏î‡πÑ‡∏•‡∏ô‡πå‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏≤',
        to: 'https://line.me/ti/p/',
        icon: 'i-simple-icons-line',
        color: 'neutral'
    },
    {
        label: 'Facebook',
        to: 'https://www.facebook.com/‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏à‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì',
        icon: 'i-simple-icons-facebook',
        color: 'neutral'
    },
    {
        label: 'Instagram',
        to: 'https://www.instagram.com/‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏à‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì',
        icon: 'i-simple-icons-instagram',
        color: 'neutral'
    },
    {
        label: 'Youtube',
        to: 'https://www.youtube.com/‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏à‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì',
        icon: 'i-simple-icons-youtube',
        color: 'neutral'
    },
    {
        label: 'Tiktok',
        to: 'https://www.tiktok.com/@‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏à‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì',
        icon: 'i-simple-icons-tiktok',
        color: 'neutral'
    },
])

const items = computed<NavigationMenuItem[]>(() => [
    {
        label: '‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£',
        to: '/#services',
        icon: 'i-lucide-layers',
        active: route.hash === '#services'
    }, {

        label: '‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô',
        to: '/#promotion',
        icon: 'i-lucide-tag',
        active: route.hash === '#promotion'
    },
    {
        label: '‡∏ú‡∏•‡∏á‡∏≤‡∏ô',
        to: '/#portfolio',
        icon: 'i-lucide-proportions',
        active: route.hash === '#portfolio'
    },
    {
        label: 'Blogs',
        to: '/#blogs',
        icon: 'i-lucide-file-text',
        active: route.path.startsWith('/blogs') || route.hash === '#blogs',
        children: [
            {
                label: '‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡πÅ‡∏ï‡πà‡∏á‡∏£‡∏ñ',
                icon: 'i-lucide-wrench',
                description: '‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏Å‡∏≤‡∏£‡πÅ‡∏ï‡πà‡∏á‡∏£‡∏ñ‡πÉ‡∏´‡πâ‡∏™‡∏ß‡∏¢‡πÇ‡∏î‡∏ô‡πÉ‡∏à',
                // to: '/blogs/car-modification-tips'
            },
            {
                label: '‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå',
                icon: 'i-lucide-star',
                description: '‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÅ‡∏ï‡πà‡∏á‡∏£‡∏ñ‡πÅ‡∏•‡∏∞‡∏≠‡∏∞‡πÑ‡∏´‡∏•‡πà‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û',
                // to: '/blogs/equipment-reviews'
            },
            {
                label: '‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£‡∏ß‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏ñ',
                icon: 'i-lucide-newspaper',
                description: '‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏ß‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå',
                // to: '/blogs/car-news'
            },
            {
                label: '‡∏Å‡∏≤‡∏£‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏£‡∏ñ',
                icon: 'i-lucide-shield-check',
                description: '‡∏ß‡∏¥‡∏ò‡∏µ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏£‡∏ñ‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏™‡∏†‡∏≤‡∏û‡∏î‡∏µ‡πÄ‡∏™‡∏°‡∏≠',
                // to: '/blogs/car-maintenance'
            },
            {
                label: '‡πÅ‡∏Å‡∏•‡πÄ‡∏•‡∏≠‡∏£‡∏µ‡πà‡∏ú‡∏•‡∏á‡∏≤‡∏ô',
                icon: 'i-lucide-image',
                description: '‡∏ä‡∏°‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏ï‡πà‡∏á‡∏£‡∏ñ‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡∏°‡∏ä‡πà‡∏≤‡∏á‡∏°‡∏∑‡∏≠‡∏≠‡∏≤‡∏ä‡∏µ‡∏û',
                // to: '/blogs/gallery'
            },
            {
                label: '‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢',
                icon: 'i-lucide-help-circle',
                description: '‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏ï‡πà‡∏á‡∏£‡∏ñ',
                // to: '/blogs/faq'
            }
        ]

    },
    {
        label: '‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤',
        icon: 'i-lucide-phone',
        to: '/#contact',
        active: route.hash === '#contact'
    }])

const itemss = computed<NavigationMenuItem[]>(() => [
    {
        label: '‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£',
        to: '/#services',
        icon: 'i-lucide-layers',
        active: route.hash === '#services'
    }, {

        label: '‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô',
        to: '/#promotion',
        icon: 'i-lucide-tag',
        active: route.hash === '#promotion'
    },
    {
        label: '‡∏ú‡∏•‡∏á‡∏≤‡∏ô',
        to: '/#portfolio',
        icon: 'i-lucide-proportions',
        active: route.hash === '#portfolio'
    },
    {
        label: 'Blogs',
        to: '/#blogs',
        icon: 'i-lucide-file-text',
        active: route.path.startsWith('/blogs') || route.hash === '#blogs',
    },
    {
        label: '‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤',
        icon: 'i-lucide-phone',
        to: '/#contact',
        active: route.hash === '#contact'
    }])

</script>
<template>
    <div>
        <UBanner icon="i-lucide-sparkles"
            title="üî• ‡πÇ‡∏õ‡∏£‡πÅ‡∏£‡∏á! ‡πÅ‡∏û‡πá‡∏Ñ‡πÄ‡∏Å‡∏à‡πÅ‡∏ï‡πà‡∏á‡∏£‡∏ñ‡∏Ñ‡∏£‡∏ö‡πÄ‡∏ã‡πá‡∏ï ‡∏•‡πâ‡∏≠‡πÅ‡∏°‡πá‡∏Å+‡∏¢‡∏≤‡∏á+‡∏ä‡πà‡∏ß‡∏á‡∏•‡πà‡∏≤‡∏á ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏û‡∏¥‡πÄ‡∏®‡∏© ‡∏ü‡∏£‡∏µ‡∏Ñ‡πà‡∏≤‡πÅ‡∏£‡∏á!"
            :actions="[{ label: '‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏¢', to: '/#contact', variant: 'outline', size: 'xs' }]" close
            close-icon="i-lucide-x" />

        <UHeader title="Car-Auto" :toggle="false">

            <template #left>
                <NuxtLink to="/">
                    <Logo />
                </NuxtLink>
            </template>

            <UNavigationMenu :items="items" />

            <template #right>
                <UTooltip v-for="link in socialLinks" :key="link.label" :text="link.label">
                    <UButton color="neutral" variant="ghost" :to="link.to" target="_blank" :icon="link.icon"
                        :aria-label="link.label" :size="'xs'" />
                </UTooltip>
                <UColorModeButton />
            </template>

        </UHeader>

        <nav class="sticky top-(--ui-header-height) bg-default/75 z-[2]">
            <UNavigationMenu highlight highlight-color="primary" orientation="horizontal"
                :items="isMobile ? itemss : items" class="lg:hidden justify-center border-b border-default w-full" :ui="{
                    label: 'w-full flex items-center gap-1.5 font-semibold text-md text-highlighted px-2.5 py-1.5',
                    link: 'gap-[4px]  sm:gap-1.5 font-normal sm:font-medium text-[12px] sm:text-sm',
                    linkLeadingIcon: 'shrink-0 size-3 sm:size-5',
                }" />
        </nav>

        <UMain>
            <slot />
        </UMain>

        <USeparator icon="i-token-branded-cwar" class="mt-16" />

        <UFooter>

            <template #left>
                <p class="text-muted text-xs md:text-sm">
                    Copyright ¬© {{ new Date().getFullYear() }} CAR-AUTO. All rights reserved.
                </p>
            </template>

            <template #right>
                <UTooltip v-for="link in socialLinks" :key="link.label" :text="link.label">
                    <UButton color="neutral" variant="ghost" :to="link.to" target="_blank" :icon="link.icon"
                        :aria-label="link.label" size="xs" />
                </UTooltip>
            </template>

        </UFooter>
    </div>
</template>